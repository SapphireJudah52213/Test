<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>iOS Liquid Glass â€“ Draggable</title>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

.scene {
  position: relative;
  width: 100%;
  height: 100%;
}

/* Background to refract */
.background {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 20% 30%, #6dd5fa, transparent 45%),
    radial-gradient(circle at 80% 70%, #fbc2eb, transparent 45%),
    linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  filter: saturate(140%) contrast(110%);
}

/* Glass lens */
.glass {
  position: absolute;
  width: 240px;
  height: 240px;
  border-radius: 50%;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);

  backdrop-filter: blur(30px) saturate(180%);
  -webkit-backdrop-filter: blur(30px) saturate(180%);

  background:
    radial-gradient(circle at 30% 25%,
      rgba(255,255,255,0.7),
      rgba(255,255,255,0.25) 40%,
      rgba(255,255,255,0.08) 70%
    );

  border: 1px solid rgba(255,255,255,0.35);

  box-shadow:
    inset 0 1px 1px rgba(255,255,255,0.75),
    inset 0 -6px 18px rgba(0,0,0,0.35),
    0 45px 90px rgba(0,0,0,0.5);

  filter: url(#glassFilter);
  overflow: hidden;

  cursor: grab;
  touch-action: none;
}

/* Edge thickness + caustics */
.glass::before {
  content: "";
  position: absolute;
  inset: -18%;
  border-radius: 50%;
  background: radial-gradient(
    circle,
    transparent 55%,
    rgba(255,255,255,0.45) 70%,
    transparent 82%
  );
  mix-blend-mode: screen;
}

.glass::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: radial-gradient(
    circle at 75% 75%,
    rgba(255,255,255,0.35),
    transparent 60%
  );
  pointer-events: none;
}
</style>
</head>

<body>
<div class="scene">
  <div class="background"></div>

  <!-- SVG filter for refraction -->
  <svg width="0" height="0">
    <filter id="glassFilter">
      <feTurbulence
        type="fractalNoise"
        baseFrequency="0.015"
        numOctaves="2"
        seed="9"
        result="noise"
      />
      <feDisplacementMap
        in="SourceGraphic"
        in2="noise"
        scale="26"
        xChannelSelector="R"
        yChannelSelector="G"
      />
    </filter>
  </svg>

  <div class="glass"></div>
</div>

<script>
const glass = document.querySelector('.glass');

let isDragging = false;
let startX, startY, originX, originY;

// Dynamic lighting
document.addEventListener('mousemove', e => {
  const x = (e.clientX / window.innerWidth) * 100;
  const y = (e.clientY / window.innerHeight) * 100;

  glass.style.background = `
    radial-gradient(circle at ${x}% ${y}%,
      rgba(255,255,255,0.7),
      rgba(255,255,255,0.25) 40%,
      rgba(255,255,255,0.08) 70%
    )
  `;
});

// Drag logic (Pointer Events = mouse + touch)
glass.addEventListener('pointerdown', e => {
  isDragging = true;
  glass.setPointerCapture(e.pointerId);
  glass.style.cursor = 'grabbing';

  const rect = glass.getBoundingClientRect();
  startX = e.clientX;
  startY = e.clientY;
  originX = rect.left + rect.width / 2;
  originY = rect.top + rect.height / 2;
});

document.addEventListener('pointermove', e => {
  if (!isDragging) return;

  const dx = e.clientX - startX;
  const dy = e.clientY - startY;

  glass.style.left = originX + dx + 'px';
  glass.style.top = originY + dy + 'px';
  glass.style.transform = 'translate(-50%, -50%)';
});

document.addEventListener('pointerup', () => {
  isDragging = false;
  glass.style.cursor = 'grab';
});
</script>
</body>
</html>
